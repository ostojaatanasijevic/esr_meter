Version 4
SHEET 1 4372 1116
WIRE 832 -432 640 -432
WIRE 976 -432 832 -432
WIRE 1120 -432 976 -432
WIRE 1520 -432 1120 -432
WIRE 1520 -368 1520 -432
WIRE 976 -320 976 -432
WIRE 832 -240 832 -432
WIRE 1360 -240 1360 -288
WIRE 1360 -240 1136 -240
WIRE 1520 -240 1520 -288
WIRE 1520 -240 1360 -240
WIRE 1360 -192 1360 -240
WIRE 1136 -160 1136 -240
WIRE 1184 -160 1136 -160
WIRE 1296 -144 1248 -144
WIRE 976 -128 976 -240
WIRE 1184 -128 976 -128
WIRE 640 -96 640 -432
WIRE 976 -96 976 -128
WIRE 1168 -64 1072 -64
WIRE 1360 -64 1360 -96
WIRE 1360 -64 1264 -64
WIRE 1696 -64 1360 -64
WIRE 2528 -64 1696 -64
WIRE 832 16 832 -176
WIRE 976 16 976 -16
WIRE 976 16 832 16
WIRE 1456 16 1456 0
WIRE 2128 32 2112 32
WIRE 2528 48 2528 -64
WIRE 832 96 832 16
WIRE 1888 96 1824 96
WIRE 2320 96 2320 80
WIRE 2320 96 2112 96
WIRE 1184 144 1184 -16
WIRE 1296 144 1184 144
WIRE 1344 144 1296 144
WIRE 1456 144 1456 96
WIRE 1456 144 1408 144
WIRE 1072 160 1072 -64
WIRE 1616 160 1552 160
WIRE 1888 160 1616 160
WIRE 2144 160 2112 160
WIRE 2176 160 2144 160
WIRE 2208 160 2176 160
WIRE 2320 160 2320 96
WIRE 2320 160 2288 160
WIRE 1552 176 1552 160
WIRE 1696 176 1696 -64
WIRE 2528 176 2528 128
WIRE 1184 208 1184 144
WIRE 1296 208 1296 144
WIRE 1456 208 1456 144
WIRE 2128 224 2112 224
WIRE 1552 256 1520 256
WIRE 1616 256 1616 160
WIRE 1648 256 1616 256
WIRE 2128 256 2128 224
WIRE 2176 256 2176 160
WIRE 640 336 640 -16
WIRE 832 336 832 176
WIRE 1072 336 1072 224
WIRE 1184 336 1184 272
WIRE 1296 336 1296 288
WIRE 1456 336 1456 304
WIRE 1696 336 1696 272
WIRE 2128 336 2128 320
WIRE 2176 336 2176 320
WIRE 2528 336 2528 240
FLAG 1696 336 0
FLAG 1120 -432 Vcc
FLAG 1216 -176 Vcc
FLAG 1216 -112 0
FLAG 2144 160 th
FLAG 1824 96 th
FLAG 1888 224 Vcc
FLAG 2176 336 0
FLAG 2128 32 Vcc
FLAG 1888 32 0
FLAG 2528 336 0
FLAG 1456 336 0
FLAG 832 336 0
FLAG 1456 0 Vcc
FLAG 2320 0 Vcc
FLAG 1296 336 0
FLAG 1184 336 0
FLAG 2128 336 0
FLAG 1072 336 0
FLAG 640 336 0
SYMBOL voltage 640 -112 R0
WINDOW 123 -832 476 Left 2
WINDOW 39 -729 458 Left 2
WINDOW 0 66 91 Left 2
WINDOW 3 39 50 Left 2
SYMATTR Value2 AC 0
SYMATTR SpiceLine Rser=0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL cap 2512 176 R0
WINDOW 0 46 17 Left 2
WINDOW 3 49 46 Left 2
SYMATTR InstName Cdut
SYMATTR Value 1µ
SYMBOL res 2512 32 R0
WINDOW 0 48 45 Left 2
WINDOW 3 49 73 Left 2
SYMATTR InstName Rdut
SYMATTR Value 2R
SYMBOL res 1344 -384 R0
WINDOW 0 37 52 Left 2
SYMATTR InstName R8
SYMATTR Value 10R
SYMATTR SpiceLine tol=5
SYMBOL pnp 1296 -96 M180
SYMATTR InstName Q_charge
SYMATTR Value 2N5401
SYMBOL nmos 1648 176 R0
WINDOW 0 54 -1 Left 2
WINDOW 3 55 27 Left 2
SYMATTR InstName M_discharge
SYMATTR Value IRFZ44N
SYMBOL nmos 1264 -16 M270
WINDOW 0 -73 -7 Left 2
WINDOW 3 -73 -31 Left 2
SYMATTR InstName M_sample
SYMATTR Value 2N7002
SYMBOL cap 1056 160 R0
WINDOW 0 46 17 Left 2
WINDOW 3 49 46 Left 2
SYMATTR InstName Chold
SYMATTR Value 1µ
SYMBOL res 816 80 R0
WINDOW 0 37 52 Left 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMATTR SpiceLine tol=5
SYMBOL res 960 -112 R0
WINDOW 0 41 7 Left 2
WINDOW 3 40 34 Left 2
SYMATTR InstName Rtrim_pot
SYMATTR Value 150k
SYMATTR SpiceLine tol=5
SYMBOL res 960 -336 R0
WINDOW 0 37 52 Left 2
SYMATTR InstName R3
SYMATTR Value 330k
SYMATTR SpiceLine tol=5
SYMBOL References\\LT1389-1.25 832 -208 R0
WINDOW 0 -57 -15 Left 2
WINDOW 3 -153 -43 Left 2
SYMATTR InstName U1
SYMBOL res 1504 -384 R0
WINDOW 0 37 52 Left 2
SYMATTR InstName R4
SYMATTR Value 90R
SYMATTR SpiceLine tol=5
SYMBOL OpAmps\\UniversalOpAmp4 1216 -144 R0
SYMATTR InstName U2
SYMATTR Value2 Avol=1Meg GBW=10Meg Slew=1Meg
SYMBOL Misc\\NE555 2000 128 R0
SYMATTR InstName U4
SYMBOL cap 2112 256 R0
WINDOW 0 -122 38 Left 2
WINDOW 3 -120 66 Left 2
SYMATTR InstName C_bypass
SYMATTR Value 0.01µ
SYMBOL cap 2160 256 R0
WINDOW 0 46 17 Left 2
WINDOW 3 49 46 Left 2
SYMATTR InstName C_clk
SYMATTR Value 1n
SYMBOL res 2304 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 33k
SYMATTR SpiceLine tol=5
SYMBOL res 2304 -16 R0
WINDOW 0 37 52 Left 2
SYMATTR InstName R10
SYMATTR Value 220k
SYMATTR SpiceLine tol=5
SYMBOL res 1440 0 R0
WINDOW 0 37 52 Left 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMATTR SpiceLine tol=5
SYMBOL cap 1408 128 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C_rise
SYMATTR Value 1n
SYMBOL res 1280 192 R0
WINDOW 0 37 52 Left 2
SYMATTR InstName R_rise
SYMATTR Value 10k
SYMATTR SpiceLine tol=5
SYMBOL diode 1200 272 R180
WINDOW 0 -48 -20 Left 2
WINDOW 3 50 3 Left 2
SYMATTR InstName D_inverse
SYMATTR Value 1N4148
SYMBOL npn 1520 208 M0
SYMATTR InstName Q1
SYMATTR Value BC547B
SYMBOL res 1536 160 R0
WINDOW 0 37 52 Left 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMATTR SpiceLine tol=5
TEXT 1248 456 Left 2 !.tran 0 200000u 10u 50n
TEXT 1248 416 Left 2 !;op
TEXT 1256 496 Left 2 !.lib Z:\\home\\ostoja\\kicad_models\\RC4558.301
TEXT 1256 520 Left 2 !.lib Z:\\home\\ostoja\\kicad_models\\lmx58_lm2904.lib
